
@{
    ViewBag.Title = "Map";
}
<head>
    <meta charset='utf-8' />
    <title>Animate a point along a route</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.css' rel='stylesheet' />

</head>
<body>

    <style>
        body {
            margin-top: 650px;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            height: 600px;
            width: 800px;
            margin-top: 100px;
        }

        .overlay {
            position: absolute;
            top: 10px;
            left: 10px;
        }

            .overlay button {
                position: absolute;
                font: 600 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
                background-color: #3386c0;
                color: #fff;
                display: inline-block;
                margin: 0;
                padding: 10px 20px;
                border: none;
                cursor: pointer;
                border-radius: 3px;
                margin-top: 100px;
                margin-left: 20px;
            }

                .overlay button:hover {
                    background-color: #4ea0da;
                }
    </style>
    <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js' charset='utf-8'></script>

    <div id='map'></div>
    <div class='overlay'>
        <button id='replay'>Replay</button>
    </div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1Ijoic2hhcmFkOTciLCJhIjoiY2ptc3JxdXVpMDZ4aTNxb2UzdTdjNGZwZiJ9.u5eAq5gMIlP-pJ1fq73SNQ';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/light-v9',
            center: [-93.20177, 44.95166]
            ,
            zoom: 11
        });

        // San Francisco
        var origin = [-93.26123, 44.97354];

        // Washington DC
        var destination = [-93.10723, 44.94887];

        // A simple line from origin to destination.
        var route = {
            "type": "FeatureCollection",
            "features": [{
                "type": "Feature",
                "geometry": {
                    "type": "LineString",
                    "coordinates": [
                        [-93.26123, 44.97354],
                        [-93.26123, 44.97354],
                        [-93.26177, 44.97377],
                        [-93.26232, 44.974],
                        [-93.26286, 44.97423],
                        [-93.2634, 44.97446],
                        [-93.26394, 44.97469],
                        [-93.26438, 44.97488],
                        [-93.26492, 44.97511],
                        [-93.26546, 44.97534],
                        [-93.26601, 44.97557],
                        [-93.26655, 44.9758],
                        [-93.26709, 44.97603],
                        [-93.26763, 44.97626],
                        [-93.26807, 44.97644],
                        [-93.26861, 44.97667],
                        [-93.26915, 44.9769],
                        [-93.2697, 44.97713],
                        [-93.27024, 44.97736],
                        [-93.27078, 44.97759],
                        [-93.27122, 44.97777],
                        [-93.27176, 44.978],
                        [-93.2723, 44.97823],
                        [-93.27285, 44.97846],
                        [-93.27339, 44.97869],
                        [-93.2739, 44.97861],
                        [-93.27435, 44.9783],
                        [-93.2748, 44.97799],
                        [-93.27525, 44.97768],
                        [-93.2758, 44.9773],
                        [-93.27625, 44.97699],
                        [-93.2767, 44.97668],
                        [-93.27715, 44.97637],
                        [-93.2776, 44.97606],
                        [-93.27818, 44.97573],
                        [-93.27871, 44.9755],
                        [-93.27914, 44.97532],
                        [-93.27968, 44.97509],
                        [-93.28022, 44.97487],
                        [-93.28076, 44.97464],
                        [-93.2813, 44.97441],
                        [-93.28183, 44.97419],
                        [-93.28237, 44.97396],
                        [-93.28291, 44.97373],
                        [-93.28345, 44.97351],
                        [-93.28388, 44.97332],
                        [-93.28442, 44.9731],
                        [-93.28495, 44.97287],
                        [-93.28549, 44.97264],
                        [-93.28603, 44.97242],
                        [-93.28657, 44.97219],
                        [-93.28711, 44.97196],
                        [-93.28764, 44.97174],
                        [-93.28805, 44.97148],
                        [-93.28806, 44.97087],
                        [-93.28807, 44.97035],
                        [-93.28808, 44.96974],
                        [-93.28809, 44.96912],
                        [-93.28814, 44.96864],
                        [-93.28823, 44.96803],
                        [-93.2883, 44.96751],
                        [-93.28839, 44.9669],
                        [-93.28857, 44.96642],
                        [-93.28917, 44.96639],
                        [-93.28975, 44.96642],
                        [-93.2903, 44.96643],
                        [-93.29093, 44.96643],
                        [-93.29143, 44.96643],
                        [-93.29206, 44.96643],
                        [-93.29257, 44.96643],
                        [-93.2932, 44.96643],
                        [-93.2937, 44.96643],
                        [-93.29433, 44.96643],
                        [-93.29484, 44.96643],
                        [-93.29547, 44.96643],
                        [-93.2961, 44.96643],
                        [-93.2966, 44.96643],
                        [-93.29723, 44.96643],
                        [-93.29774, 44.96643],
                        [-93.29837, 44.96642],
                        [-93.29887, 44.96642],
                        [-93.2995, 44.96642],
                        [-93.30001, 44.96642],
                        [-93.30064, 44.96642],
                        [-93.30114, 44.96642],
                        [-93.30177, 44.96642],
                        [-93.3024, 44.96642],
                        [-93.30291, 44.96642],
                        [-93.30354, 44.96642],
                        [-93.30404, 44.96642],
                        [-93.30467, 44.96642],
                        [-93.30517, 44.96642],
                        [-93.30578, 44.96642],
                        [-93.30636, 44.96645],
                        [-93.30695, 44.96647],
                        [-93.30716, 44.96605],
                        [-93.3074, 44.96547],
                        [-93.30745, 44.96488],
                        [-93.30747, 44.96437],
                        [-93.30762, 44.96378],
                        [-93.30793, 44.96341],
                        [-93.30824, 44.96293],
                        [-93.30835, 44.96245],
                        [-93.30836, 44.96201],
                        [-93.30837, 44.96148],
                        [-93.30838, 44.96095],
                        [-93.30839, 44.96051],
                        [-93.3084, 44.95998],
                        [-93.30851, 44.95955],
                        [-93.30899, 44.95965],
                        [-93.30948, 44.95961],
                        [-93.30998, 44.95936],
                        [-93.31026, 44.95898],
                        [-93.31027, 44.95851],
                        [-93.31039, 44.95806],
                        [-93.31091, 44.95792],
                        [-93.31139, 44.9579],
                        [-93.31188, 44.95788],
                        [-93.31229, 44.95766],
                        [-93.31253, 44.95729],
                        [-93.3124, 44.95677],
                        [-93.31226, 44.9563],
                        [-93.31223, 44.95579],
                        [-93.31219, 44.95531],
                        [-93.3121, 44.9548],
                        [-93.31202, 44.95438],
                        [-93.31249, 44.9543],
                        [-93.3131, 44.95429],
                        [-93.31358, 44.95428],
                        [-93.31407, 44.95427],
                        [-93.31453, 44.95417],
                        [-93.31492, 44.95388],
                        [-93.31528, 44.95355],
                        [-93.31573, 44.95317],
                        [-93.31607, 44.95296],
                        [-93.31646, 44.95262],
                        [-93.31651, 44.95219],
                        [-93.31656, 44.95167],
                        [-93.31661, 44.95114],
                        [-93.31674, 44.95068],
                        [-93.31687, 44.95026],
                        [-93.31682, 44.94977],
                        [-93.31667, 44.94927],
                        [-93.31651, 44.94877],
                        [-93.31645, 44.94832],
                        [-93.31671, 44.94793],
                        [-93.31705, 44.94744],
                        [-93.31733, 44.94714],
                        [-93.31768, 44.94678],
                        [-93.31803, 44.94641],
                        [-93.31837, 44.94604],
                        [-93.31872, 44.94568],
                        [-93.31907, 44.94531],
                        [-93.31934, 44.9449],
                        [-93.31958, 44.94444],
                        [-93.31972, 44.94401],
                        [-93.31988, 44.9435],
                        [-93.32002, 44.94308],
                        [-93.32019, 44.94257],
                        [-93.32026, 44.9421],
                        [-93.32031, 44.94159],
                        [-93.3203, 44.94112],
                        [-93.32028, 44.94059],
                        [-93.32023, 44.94011],
                        [-93.32003, 44.93965],
                        [-93.31977, 44.93924],
                        [-93.31957, 44.93881],
                        [-93.31961, 44.93834],
                        [-93.31987, 44.93785],
                        [-93.32009, 44.93744],
                        [-93.32032, 44.93696],
                        [-93.32042, 44.93649],
                        [-93.32045, 44.93604],
                        [-93.32031, 44.93554],
                        [-93.31986, 44.93525],
                        [-93.31946, 44.93515],
                        [-93.31886, 44.93508],
                        [-93.31838, 44.93505],
                        [-93.31799, 44.93503],
                        [-93.31749, 44.93504],
                        [-93.317, 44.93505],
                        [-93.31642, 44.9351],
                        [-93.31595, 44.93516],
                        [-93.31549, 44.93521],
                        [-93.31494, 44.93522],
                        [-93.31448, 44.93521],
                        [-93.31401, 44.93509],
                        [-93.31356, 44.93491],
                        [-93.31309, 44.93463],
                        [-93.31271, 44.93441],
                        [-93.31223, 44.93422],
                        [-93.31176, 44.93412],
                        [-93.31127, 44.93407],
                        [-93.31079, 44.93402],
                        [-93.31034, 44.93373],
                        [-93.31022, 44.93333],
                        [-93.31012, 44.9328],
                        [-93.30982, 44.93248],
                        [-93.30944, 44.93209],
                        [-93.30919, 44.93163],
                        [-93.30887, 44.93141],
                        [-93.30805, 44.93068],
                        [-93.30742, 44.9296],
                        [-93.30674, 44.92884],
                        [-93.30574, 44.92853],
                        [-93.30445, 44.92858],
                        [-93.30322, 44.92851],
                        [-93.3021, 44.92824],
                        [-93.30095, 44.92792],
                        [-93.29969, 44.92757],
                        [-93.29863, 44.92707],
                        [-93.2976, 44.92651],
                        [-93.29689, 44.92549],
                        [-93.29638, 44.9244],
                        [-93.29638, 44.92318],
                        [-93.29676, 44.92205],
                        [-93.2972, 44.92093],
                        [-93.29784, 44.91986],
                        [-93.29843, 44.91887],
                        [-93.29917, 44.91781],
                        [-93.29995, 44.91695],
                        [-93.2989, 44.91628],
                        [-93.29809, 44.91557],
                        [-93.29791, 44.91435],
                        [-93.29789, 44.91319],
                        [-93.29787, 44.91194],
                        [-93.29842, 44.9111],
                        [-93.2984, 44.90986],
                        [-93.29766, 44.90909],
                        [-93.29663, 44.90841],
                        [-93.29564, 44.90782],
                        [-93.29438, 44.90791],
                        [-93.29319, 44.90792],
                        [-93.29197, 44.90781],
                        [-93.29074, 44.90771],
                        [-93.28957, 44.90763],
                        [-93.28834, 44.90766],
                        [-93.2871, 44.90746],
                        [-93.28593, 44.90719],
                        [-93.28481, 44.90699],
                        [-93.2836, 44.90683],
                        [-93.28284, 44.90584],
                        [-93.28166, 44.90568],
                        [-93.2804, 44.90564],
                        [-93.27924, 44.9058],
                        [-93.27836, 44.90645],
                        [-93.2779, 44.90737],
                        [-93.2768, 44.90776],
                        [-93.27566, 44.90832],
                        [-93.27469, 44.90903],
                        [-93.27363, 44.90968],
                        [-93.27253, 44.90996],
                        [-93.27123, 44.91017],
                        [-93.27021, 44.91056],
                        [-93.26975, 44.91167],
                        [-93.26889, 44.91235],
                        [-93.26765, 44.91243],
                        [-93.26643, 44.91238],
                        [-93.26531, 44.91199],
                        [-93.26431, 44.91127],
                        [-93.26305, 44.91131],
                        [-93.26191, 44.9116],
                        [-93.26077, 44.91201],
                        [-93.25973, 44.91262],
                        [-93.25859, 44.91301],
                        [-93.25742, 44.91335],
                        [-93.25621, 44.91354],
                        [-93.25497, 44.91357],
                        [-93.25379, 44.91364],
                        [-93.25274, 44.91422],
                        [-93.25174, 44.91501],
                        [-93.25068, 44.91563],
                        [-93.24952, 44.91598],
                        [-93.24835, 44.91604],
                        [-93.24729, 44.91579],
                        [-93.2473, 44.91464],
                        [-93.24731, 44.91339],
                        [-93.24732, 44.91215],
                        [-93.24733, 44.91099],
                        [-93.24734, 44.90975],
                        [-93.24735, 44.90851],
                        [-93.24736, 44.90726],
                        [-93.24737, 44.90611],
                        [-93.24739, 44.90483],
                        [-93.24744, 44.90368],
                        [-93.24748, 44.90243],
                        [-93.24728, 44.90142],
                        [-93.246, 44.90137],
                        [-93.24485, 44.90147],
                        [-93.24359, 44.90181],
                        [-93.24261, 44.90237],
                        [-93.24158, 44.90301],
                        [-93.24066, 44.90381],
                        [-93.24013, 44.90489],
                        [-93.23929, 44.90583],
                        [-93.23827, 44.90652],
                        [-93.23731, 44.9071],
                        [-93.23662, 44.90814],
                        [-93.23612, 44.90926],
                        [-93.23573, 44.91038],
                        [-93.2351, 44.91138],
                        [-93.23447, 44.91221],
                        [-93.23421, 44.91308],
                        [-93.23453, 44.9139],
                        [-93.2354, 44.91446],
                        [-93.23618, 44.91487],
                        [-93.23708, 44.91521],
                        [-93.23806, 44.9155],
                        [-93.23905, 44.91568],
                        [-93.23997, 44.91574],
                        [-93.23978, 44.91631],
                        [-93.23882, 44.91638],
                        [-93.23784, 44.91638],
                        [-93.23685, 44.91639],
                        [-93.23587, 44.91639],
                        [-93.235, 44.91636],
                        [-93.23407, 44.91607],
                        [-93.23302, 44.91602],
                        [-93.23214, 44.91602],
                        [-93.23114, 44.91602],
                        [-93.23013, 44.91602],
                        [-93.22925, 44.91602],
                        [-93.22824, 44.91602],
                        [-93.22736, 44.91601],
                        [-93.22636, 44.91601],
                        [-93.22535, 44.91601],
                        [-93.22447, 44.91601],
                        [-93.22347, 44.91601],
                        [-93.22246, 44.91601],
                        [-93.22154, 44.91601],
                        [-93.22054, 44.91602],
                        [-93.21967, 44.91603],
                        [-93.21867, 44.91603],
                        [-93.21775, 44.91608],
                        [-93.2168, 44.91622],
                        [-93.21578, 44.91627],
                        [-93.21488, 44.91632],
                        [-93.21385, 44.91644],
                        [-93.21299, 44.9165],
                        [-93.21223, 44.91711],
                        [-93.21138, 44.91759],
                        [-93.21035, 44.91762],
                        [-93.20958, 44.91788],
                        [-93.20879, 44.91841],
                        [-93.20782, 44.91863],
                        [-93.20689, 44.91883],
                        [-93.206, 44.91917],
                        [-93.20511, 44.9195],
                        [-93.20421, 44.91983],
                        [-93.20397, 44.92071],
                        [-93.204, 44.92164],
                        [-93.20437, 44.92258],
                        [-93.20494, 44.92321],
                        [-93.20462, 44.92406],
                        [-93.20395, 44.92472],
                        [-93.2035, 44.92553],
                        [-93.20302, 44.92645],
                        [-93.20257, 44.92736],
                        [-93.20251, 44.92822],
                        [-93.20266, 44.92916],
                        [-93.20286, 44.93016],
                        [-93.20281, 44.93104],
                        [-93.20275, 44.93201],
                        [-93.20282, 44.93296],
                        [-93.203, 44.9339],
                        [-93.20321, 44.93488],
                        [-93.20357, 44.93573],
                        [-93.20428, 44.93635],
                        [-93.20503, 44.93692],
                        [-93.20564, 44.93762],
                        [-93.20515, 44.93838],
                        [-93.20426, 44.93873],
                        [-93.20379, 44.93954],
                        [-93.20387, 44.94048],
                        [-93.20386, 44.94146],
                        [-93.20343, 44.94227],
                        [-93.20309, 44.94312],
                        [-93.20314, 44.9441],
                        [-93.20334, 44.94501],
                        [-93.20363, 44.946],
                        [-93.20407, 44.94693],
                        [-93.20459, 44.94761],
                        [-93.20517, 44.94838],
                        [-93.20553, 44.94925],
                        [-93.20611, 44.95002],
                        [-93.2069, 44.95049],
                        [-93.20783, 44.95094],
                        [-93.20865, 44.95135],
                        [-93.20957, 44.9518],
                        [-93.21037, 44.95228],
                        [-93.21114, 44.95277],
                        [-93.21191, 44.95333],
                        [-93.21269, 44.95389],
                        [-93.21338, 44.95466],
                        [-93.21401, 44.95536],
                        [-93.21481, 44.95578],
                        [-93.21571, 44.95625],
                        [-93.21651, 44.95667],
                        [-93.21741, 44.95714],
                        [-93.21818, 44.95766],
                        [-93.21889, 44.95824],
                        [-93.21929, 44.95853],
                        [-93.21964, 44.95877],
                        [-93.21998, 44.95901],
                        [-93.22033, 44.95925],
                        [-93.22065, 44.95952],
                        [-93.22101, 44.95988],
                        [-93.2213, 44.96017],
                        [-93.22159, 44.96047],
                        [-93.22191, 44.96074],
                        [-93.22224, 44.96101],
                        [-93.22257, 44.96128],
                        [-93.22291, 44.96155],
                        [-93.22324, 44.96182],
                        [-93.22368, 44.96172],
                        [-93.22409, 44.9618],
                        [-93.2245, 44.96201],
                        [-93.22478, 44.96231],
                        [-93.22463, 44.9627],
                        [-93.22423, 44.96294],
                        [-93.22394, 44.96311],
                        [-93.22355, 44.96333],
                        [-93.22316, 44.96356],
                        [-93.22278, 44.96379],
                        [-93.22239, 44.96402],
                        [-93.222, 44.96424],
                        [-93.22161, 44.96447],
                        [-93.22132, 44.96464],
                        [-93.2209, 44.9647],
                        [-93.22056, 44.96444],
                        [-93.22018, 44.96425],
                        [-93.21979, 44.96405],
                        [-93.21943, 44.9638],
                        [-93.21907, 44.96354],
                        [-93.21872, 44.96329],
                        [-93.21836, 44.96304],
                        [-93.218, 44.96279],
                        [-93.21764, 44.96253],
                        [-93.21729, 44.96228],
                        [-93.21693, 44.96203],
                        [-93.21657, 44.96178],
                        [-93.21621, 44.96152],
                        [-93.21584, 44.96124],
                        [-93.21549, 44.96099],
                        [-93.21515, 44.96073],
                        [-93.2148, 44.96047],
                        [-93.21446, 44.96022],
                        [-93.21411, 44.95996],
                        [-93.21377, 44.9597],
                        [-93.21342, 44.95945],
                        [-93.21303, 44.95913],
                        [-93.21283, 44.95892],
                        [-93.21251, 44.95857],
                        [-93.21224, 44.95825],
                        [-93.21199, 44.95786],
                        [-93.21178, 44.95754],
                        [-93.21148, 44.95715],
                        [-93.21119, 44.95686],
                        [-93.21084, 44.95662],
                        [-93.21043, 44.95641],
                        [-93.21002, 44.9562],
                        [-93.20971, 44.95605],
                        [-93.20929, 44.95584],
                        [-93.20888, 44.95564],
                        [-93.20847, 44.95543],
                        [-93.20817, 44.95525],
                        [-93.2078, 44.95489],
                        [-93.2075, 44.95461],
                        [-93.20719, 44.95441],
                        [-93.20668, 44.95419],
                        [-93.20633, 44.95409],
                        [-93.20587, 44.95395],
                        [-93.20553, 44.95384],
                        [-93.20507, 44.9537],
                        [-93.20472, 44.95359],
                        [-93.20424, 44.95339],
                        [-93.20379, 44.95318],
                        [-93.20354, 44.95301],
                        [-93.20314, 44.95274],
                        [-93.20287, 44.95248],
                        [-93.20252, 44.95218],
                        [-93.20218, 44.95195],
                        [-93.20177, 44.95166],
                        [-93.20141, 44.95138],
                        [-93.20109, 44.95111],
                        [-93.20077, 44.95085],
                        [-93.20045, 44.95058],
                        [-93.20021, 44.95025],
                        [-93.20009, 44.94979],
                        [-93.20003, 44.94938],
                        [-93.19989, 44.949],
                        [-93.19974, 44.94861],
                        [-93.19964, 44.94814],
                        [-93.19956, 44.9477],
                        [-93.19949, 44.94727],
                        [-93.19941, 44.94683],
                        [-93.1993, 44.94643],
                        [-93.19906, 44.94604],
                        [-93.19887, 44.94573],
                        [-93.19866, 44.94537],
                        [-93.19851, 44.94497],
                        [-93.1985, 44.94433],
                        [-93.19856, 44.94371],
                        [-93.19872, 44.94312],
                        [-93.19825, 44.94287],
                        [-93.19764, 44.94286],
                        [-93.19702, 44.94289],
                        [-93.19643, 44.94295],
                        [-93.19582, 44.94302],
                        [-93.19534, 44.94308],
                        [-93.19473, 44.94314],
                        [-93.19413, 44.94321],
                        [-93.19352, 44.94328],
                        [-93.1929, 44.9432],
                        [-93.1924, 44.94304],
                        [-93.19242, 44.94242],
                        [-93.19243, 44.94188],
                        [-93.19231, 44.94132],
                        [-93.19168, 44.94132],
                        [-93.19118, 44.94132],
                        [-93.19055, 44.94132],
                        [-93.18992, 44.94132],
                        [-93.18941, 44.94132],
                        [-93.18878, 44.94132],
                        [-93.18815, 44.94132],
                        [-93.18752, 44.94131],
                        [-93.18701, 44.94131],
                        [-93.18638, 44.94131],
                        [-93.18575, 44.94131],
                        [-93.18512, 44.94131],
                        [-93.18462, 44.94131],
                        [-93.18399, 44.94131],
                        [-93.18335, 44.94131],
                        [-93.18272, 44.94131],
                        [-93.18222, 44.94131],
                        [-93.18159, 44.94131],
                        [-93.18096, 44.94131],
                        [-93.18033, 44.94131],
                        [-93.17982, 44.94131],
                        [-93.17919, 44.94131],
                        [-93.17856, 44.9413],
                        [-93.17805, 44.9413],
                        [-93.17742, 44.9413],
                        [-93.17679, 44.9413],
                        [-93.17616, 44.9413],
                        [-93.17566, 44.9413],
                        [-93.17503, 44.9413],
                        [-93.1744, 44.9413],
                        [-93.17385, 44.94149],
                        [-93.17323, 44.94147],
                        [-93.17272, 44.94145],
                        [-93.17204, 44.94143],
                        [-93.17142, 44.94144],
                        [-93.17092, 44.94144],
                        [-93.17029, 44.94144],
                        [-93.16966, 44.94145],
                        [-93.16904, 44.94145],
                        [-93.16854, 44.94145],
                        [-93.16791, 44.94146],
                        [-93.16728, 44.94146],
                        [-93.16666, 44.94147],
                        [-93.16609, 44.94145],
                        [-93.16558, 44.94129],
                        [-93.16492, 44.94128],
                        [-93.16429, 44.94128],
                        [-93.16379, 44.94128],
                        [-93.16316, 44.94128],
                        [-93.16253, 44.94128],
                        [-93.1619, 44.94127],
                        [-93.1614, 44.94127],
                        [-93.16077, 44.94127],
                        [-93.16014, 44.94127],
                        [-93.15952, 44.94127],
                        [-93.15901, 44.94127],
                        [-93.15838, 44.94127],
                        [-93.15778, 44.94126],
                        [-93.15718, 44.94124],
                        [-93.15657, 44.94123],
                        [-93.15596, 44.94121],
                        [-93.15529, 44.94121],
                        [-93.1548, 44.94124],
                        [-93.15419, 44.94128],
                        [-93.15358, 44.94133],
                        [-93.15302, 44.94133],
                        [-93.15239, 44.94132],
                        [-93.15177, 44.9413],
                        [-93.15115, 44.94128],
                        [-93.15065, 44.94127],
                        [-93.15003, 44.94126],
                        [-93.1494, 44.94124],
                        [-93.14878, 44.94123],
                        [-93.14816, 44.94121],
                        [-93.14764, 44.94123],
                        [-93.14702, 44.94125],
                        [-93.14641, 44.94138],
                        [-93.14581, 44.9414],
                        [-93.1453, 44.9414],
                        [-93.14467, 44.94139],
                        [-93.14404, 44.94139],
                        [-93.14341, 44.94139],
                        [-93.14291, 44.94139],
                        [-93.14241, 44.94139],
                        [-93.14203, 44.94138],
                        [-93.14165, 44.94138],
                        [-93.14127, 44.94138],
                        [-93.14089, 44.94138],
                        [-93.14052, 44.94138],
                        [-93.14014, 44.94138],
                        [-93.13976, 44.94138],
                        [-93.13938, 44.94138],
                        [-93.13901, 44.94137],
                        [-93.13863, 44.94137],
                        [-93.13825, 44.94137],
                        [-93.13787, 44.94137],
                        [-93.13737, 44.94137],
                        [-93.13699, 44.94137],
                        [-93.13661, 44.94137],
                        [-93.13623, 44.94136],
                        [-93.13586, 44.94136],
                        [-93.13548, 44.94136],
                        [-93.1351, 44.94136],
                        [-93.13472, 44.94136],
                        [-93.13435, 44.94136],
                        [-93.13397, 44.94136],
                        [-93.13359, 44.94136],
                        [-93.13321, 44.94135],
                        [-93.13283, 44.94135],
                        [-93.13233, 44.94135],
                        [-93.13195, 44.94135],
                        [-93.13158, 44.94135],
                        [-93.1312, 44.94135],
                        [-93.13082, 44.94135],
                        [-93.13044, 44.94134],
                        [-93.13006, 44.94134],
                        [-93.12969, 44.94134],
                        [-93.12931, 44.94134],
                        [-93.12893, 44.94134],
                        [-93.12855, 44.94134],
                        [-93.12817, 44.94134],
                        [-93.12767, 44.94133],
                        [-93.12729, 44.94133],
                        [-93.12692, 44.94133],
                        [-93.12654, 44.94133],
                        [-93.12616, 44.94133],
                        [-93.12578, 44.94133],
                        [-93.1254, 44.94133],
                        [-93.12503, 44.94132],
                        [-93.12465, 44.94132],
                        [-93.12427, 44.94132],
                        [-93.12389, 44.94132],
                        [-93.12352, 44.94132],
                        [-93.12314, 44.94132],
                        [-93.12276, 44.94132],
                        [-93.12226, 44.94132],
                        [-93.12188, 44.94131],
                        [-93.1215, 44.94131],
                        [-93.12112, 44.94131],
                        [-93.12074, 44.94131],
                        [-93.12037, 44.94131],
                        [-93.11999, 44.94131],
                        [-93.11961, 44.94131],
                        [-93.11923, 44.9413],
                        [-93.11886, 44.9413],
                        [-93.11848, 44.9413],
                        [-93.1181, 44.9413],
                        [-93.11769, 44.94146],
                        [-93.1174, 44.94163],
                        [-93.11701, 44.94184],
                        [-93.11672, 44.94201],
                        [-93.11634, 44.94222],
                        [-93.11605, 44.94239],
                        [-93.11566, 44.9426],
                        [-93.11537, 44.94277],
                        [-93.11498, 44.94298],
                        [-93.11469, 44.94315],
                        [-93.1143, 44.94337],
                        [-93.11401, 44.94353],
                        [-93.11357, 44.9437],
                        [-93.11324, 44.94384],
                        [-93.11291, 44.94397],
                        [-93.11251, 44.94408],
                        [-93.11218, 44.94417],
                        [-93.11184, 44.94426],
                        [-93.11141, 44.94444],
                        [-93.1111, 44.94458],
                        [-93.11067, 44.94478],
                        [-93.11035, 44.94493],
                        [-93.11004, 44.94507],
                        [-93.10972, 44.94522],
                        [-93.10939, 44.94545],
                        [-93.10906, 44.9457],
                        [-93.10874, 44.94594],
                        [-93.10841, 44.94619],
                        [-93.1082, 44.94642],
                        [-93.10797, 44.94679],
                        [-93.10791, 44.94713],
                        [-93.10784, 44.94756],
                        [-93.10778, 44.9479],
                        [-93.10767, 44.94826],
                        [-93.10745, 44.94856],
                        [-93.10723, 44.94887]
                    ]
                }
            }]
        };

        // A single point that animates along the route.
        // Coordinates are initially set to origin.
        var point = {
            "type": "FeatureCollection",
            "features": [{
                "type": "Feature",
                "properties": {},
                "geometry": {
                    "type": "Point",
                    "coordinates": origin
                }
            }]
        };

        // Calculate the distance in kilometers between route start/end point.
        var lineDistance = turf.lineDistance(route.features[0], 'kilometers');

        var arc = [];

        // Number of steps to use in the arc and animation, more steps means
        // a smoother arc and animation, but too many steps will result in a
        // low frame rate
        var steps = 500;

        // Draw an arc between the `origin` & `destination` of the two points
        for (var i = 0; i < lineDistance; i += lineDistance / steps) {
            var segment = turf.along(route.features[0], i, 'kilometers');
            arc.push(segment.geometry.coordinates);
        }

        // Update the route with calculated arc coordinates
        route.features[0].geometry.coordinates = arc;

        // Used to increment the value of the point measurement against the route.
        var counter = 0;

        map.on('load', function () {
            // Add a source and layer displaying a point which will be animated in a circle.
            map.addSource('route', {
                "type": "geojson",
                "data": route
            });

            map.addSource('point', {
                "type": "geojson",
                "data": point
            });

            map.addLayer({
                "id": "route",
                "source": "route",
                "type": "line",
                "paint": {
                    "line-width": 2,
                    "line-color": "red"
                }
            });

            map.addLayer({
                "id": "point",
                "source": "point",
                "type": "circle",
                "paint": {
                    "circle-radius": 10,
                    "circle-color": "#007cbf"
                }
            });

            function animate() {
                // Update point geometry to a new position based on counter denoting
                // the index to access the arc.
                point.features[0].geometry.coordinates = route.features[0].geometry.coordinates[counter];

                // Calculate the bearing to ensure the icon is rotated to match the route arc
                // The bearing is calculate between the current point and the next point, except
                // at the end of the arc use the previous point and the current point
                point.features[0].properties.bearing = turf.bearing(
                    turf.point(route.features[0].geometry.coordinates[counter >= steps ? counter - 1 : counter]),
                    turf.point(route.features[0].geometry.coordinates[counter >= steps ? counter : counter + 1])
                );

                // Update the source with this new data.
                map.getSource('point').setData(point);

                // Request the next frame of animation so long the end has not been reached.
                if (counter < steps) {
                    requestAnimationFrame(animate);
                }

                counter = counter + 1;
            }

            document.getElementById('replay').addEventListener('click', function () {
                // Set the coordinates of the original point back to origin
                point.features[0].geometry.coordinates = origin;

                // Update the source layer
                map.getSource('point').setData(point);

                // Reset the counter
                counter = 0;

                // Restart the animation.
                animate(counter);
            });

            // Start the animation.
            animate(counter);
        });
    </script>

</body>
